#!/bin/sh
{{- if ( eq .chezmoi.os "linux" ) }}

# prevent installation of tzdata to prompt for timezone
DEBIAN_FRONTEND=noninteractive

{{- if (eq .chezmoi.osRelease.id "alpine") }}
UPDATE_CACHE_COMMAND="apk update"
INSTALL_COMMAND="apk add"
{{- else if (eq .chezmoi.osRelease.id "ubuntu") }}
UPDATE_CACHE_COMMAND="apt-get update"
INSTALL_COMMAND="apt-get install -y"
{{- else }}
echo "unsupported linux distrubution {{ .chezmoi.osRelease.id }}"
exit 1
{{- end }}


install_packages() {
	#detect_distribution

	# update cache
	$UPDATE_CACHE_COMMAND

	# packages to install
	packages="
	bat
	direnv
	exa
	git
	jq
	ripgrep
	vim
	wget
	fish
	starship
	"
	for pkg in $packages; do
		$INSTALL_COMMAND "$pkg"
	done
}

install_packages

{{ end }}
